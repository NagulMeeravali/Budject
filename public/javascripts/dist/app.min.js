"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function loadItems(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:moment().startOf("year").format("YYYY");axios.get("/api/category/"+t+"/items?year="+e).then(function(a){var n=a.data,r=Object.values(n.sumByMonth[e]),o=Object.keys(n.sumByMonth[e]),l=o.map(function(t){return t}),i=(r.map(function(t){var e=t.items,a=[];return e.forEach(function(t){a.push(t.amount)}),a}),r.map(function(t){return t.sum})),s=n.sumByMonth.budgeted.toFixed(2),d="Amount Spent Per Month â€” Budget: $"+s,c=document.getElementById("categoryChart"),u=[];i.map(function(t){t<=s?u.push("#17B890"):u.push("#DB504A")});var f={labels:l,datasets:[{label:d,data:i,backgroundColor:u,borderColor:u,borderWidth:1,fill:!1}]},m={labels:l,datasets:[{label:d,data:i,borderColor:"#748386",pointBackgroundColor:u,pointBorderColor:u,borderWidth:2,fill:!1}]},y={title:{display:!0,fontSize:18,text:t.charAt(0).toUpperCase()+t.slice(1)+" Spending for "+e},legend:{labels:{boxWidth:0}},scales:{xAxes:[{stacked:!0,ticks:{callback:function(t){return moment(t).format("MMM")}}}],yAxes:[{stacked:!0,ticks:{beginAtZero:!0,type:"linear",ticks:{min:0,max:6500,stepSize:1300},callback:function(t,e,a){return"$"+t}}}]},tooltips:{enabled:!0,mode:"single",displayColors:!1,callbacks:{title:function(t){return moment(this._data.labels[t[0].index]).format("MMMM")},label:function(t,e){return"$"+t.yLabel}}},hover:{onHover:function(t){c.style.cursor=t[0]?"pointer":"default"}}},v=new Chart(c,{type:"bar",data:f,options:y}),h=[].concat(_toConsumableArray(document.querySelectorAll("button.chartBtn"))),p="bar";if(h){var b=!0,g=!1,A=void 0;try{for(var x,C=h[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){x.value.addEventListener("click",function(t){p=this.value,v.destroy(),"line"===p?v=new Chart(c,{type:"line",data:m,options:y}):"bar"===p&&(v=new Chart(c,{type:"bar",data:f,options:y}))})}}catch(t){g=!0,A=t}finally{try{!b&&C.return&&C.return()}finally{if(g)throw A}}}c.onclick=function(t){var a=v.getElementsAtEvent(t),n=a[0],r=v.data.labels[n._index];v.data.datasets[n._datasetIndex].data[n._index];void 0!==n&&(window.location.href=window.location.href.split("?")[0]+"?month="+r+"&year="+e)}})}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function loadAllItems(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:moment().startOf("year").format("YYYY");axios.get("/api/categories/items?year="+t).then(function(e){var a=e.data,n=Object.keys(a.sumByMonth[t]),r=Object.values(a.sumByMonth[t]),o=a.sumByMonth.totalBudget.toFixed(2),l=document.getElementById("dashboardChart"),i="Total Monthly Budget: $"+o,s=[];r.map(function(t){t<=o?s.push("#17B890"):s.push("#DB504A")});var d={labels:n,datasets:[{label:i,data:r,backgroundColor:s,borderColor:s,borderWidth:1,fill:!1}]},c={labels:n,datasets:[{label:i,data:r,borderColor:"#748386",pointBackgroundColor:s,pointBorderColor:s,borderWidth:2,fill:!1}]},u={responsive:!0,title:{display:!0,fontSize:18,text:"Spending for "+t},legend:{labels:{boxWidth:0}},scales:{xAxes:[{ticks:{callback:function(t){return moment(t).format("MMM")}}}],yAxes:[{ticks:{beginAtZero:!0,callback:function(t,e,a){return"$"+t}}}]},tooltips:{enabled:!0,mode:"single",displayColors:!1,callbacks:{title:function(t){return moment(this._data.labels[t[0].index]).format("MMMM")},label:function(t,e){return"$"+t.yLabel}}},hover:{onHover:function(t){l.style.cursor=t[0]?"pointer":"default"}}},f=new Chart(l,{type:"bar",data:d,options:u}),m=[].concat(_toConsumableArray(document.querySelectorAll("button.chartBtn"))),y="bar";if(m){var v=!0,h=!1,p=void 0;try{for(var b,g=m[Symbol.iterator]();!(v=(b=g.next()).done);v=!0){b.value.addEventListener("click",function(t){t.preventDefault(),y=this.value,f.destroy(),f="line"===y?new Chart(l,{type:"line",data:c,options:u}):new Chart(l,{type:"bar",data:d,options:u})})}}catch(t){h=!0,p=t}finally{try{!v&&g.return&&g.return()}finally{if(h)throw p}}}l.onclick=function(e){var a=f.getElementsAtEvent(e),n=a[0],r=f.data.labels[n._index];f.data.datasets[n._datasetIndex].data[n._index];void 0!==n&&(window.location.href=window.location.href.split("?")[0]+"?month="+r+"&year="+t)}})}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}!function(){function t(t,e,a){var n=new RegExp("([?&])"+e+"=.*?(&|$)","i"),r=-1!==t.indexOf("?")?"&":"?";return t.match(n)?t.replace(n,"$1"+e+"="+a+"$2"):t+r+e+"="+a}function e(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}function a(){this.parentElement.classList.add("active-element")}function n(){this.value||this.parentElement.classList.remove("active-element")}var r=document.querySelector("select[name=category-type-filter]");r&&r.addEventListener("change",function(e){var a=this.value;window.location.href=t(window.location.href,"sort",a)});var o=document.querySelector(".mobile-menu-toggle");!function(){o.addEventListener("click",function(t){t.preventDefault(),document.querySelector("body").classList.toggle("menu-open")})}();var l=[].concat(_toConsumableArray(document.querySelectorAll("input:not([type=submit]):not([type=date]), select, textarea")));if(l){var i=!0,s=!1,d=void 0;try{for(var c,u=l[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var f=c.value;!function(t){t.value&&t.classList.add("has-value"),t.addEventListener("change",function(e){t.value?this.classList.add("has-value"):this.classList.remove("has-value")})}(f)}}catch(t){s=!0,d=t}finally{try{!i&&u.return&&u.return()}finally{if(s)throw d}}}var m=[].concat(_toConsumableArray(document.querySelectorAll("input[type=email]"))),y=!0,v=!1,h=void 0;try{for(var p,b=m[Symbol.iterator]();!(y=(p=b.next()).done);y=!0){p.value.addEventListener("keydown",function(t){e(this.value)?this.classList.remove("invalid-input"):this.classList.add("invalid-input")})}}catch(t){v=!0,h=t}finally{try{!y&&b.return&&b.return()}finally{if(v)throw h}}var g=document.querySelector("input[name=password]"),A=document.querySelector("input[name=confirm-password]");g&&A&&A.addEventListener("keyup",function(t){this.value!==g.value?this.classList.add("invalid-input"):(this.classList.remove("invalid-input"),this.classList.add("passwords-match"),g.classList.add("passwords-match"))});var x=document.querySelector(".amount-field input");x&&(x.classList.contains("has-value")&&x.parentElement.classList.add("active-element"),x.addEventListener("focus",a,!0),x.addEventListener("blur",a,!0),x.addEventListener("focusout",n,!0)),function(){var t=[].concat(_toConsumableArray(document.querySelectorAll(".budget-meta")));t&&t.forEach(function(t){var e=t.parentElement.parentElement,a=t.querySelector(".budget-spent"),n=Number(a.textContent.replace(/[^0-9\.-]+/g,"")),r=Number(t.querySelector(".budget-goal").textContent.replace(/[^0-9\.-]+/g,"")),o=n>r?"overspend":"underspend";a.classList.add(o),e.classList.add(o)})}()}();
//# sourceMappingURL=app.min.js.map
