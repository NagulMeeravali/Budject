"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function yearGraphs(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:moment().startOf("year").format("YYYY");axios.get("/api/category/"+t+"/items?year="+e).then(function(a){var o=a.data,n=Object.values(o.sumByMonth[e]),r=Object.keys(o.sumByMonth[e]),i=r.map(function(t){return t}),l=(n.map(function(t){var e=t.items,a=[];return e.forEach(function(t){a.push(t.amount)}),a}),n.map(function(t){return t.sum})),s=o.sumByMonth.budgeted.toFixed(2),d=(Number(s)+.2*Number(s)).toFixed(0),u="Amount Spent Per Month â€” Budget: $"+s,c=document.getElementById("categoryChart"),m=[];l.map(function(t){t<=s?m.push("#17B890"):m.push("#DB504A")});var y={labels:i,datasets:[{label:u,data:l,backgroundColor:m,borderColor:m,borderWidth:1,fill:!1}]},f={labels:i,datasets:[{label:u,data:l,borderColor:"#748386",pointBackgroundColor:m,pointBorderColor:m,borderWidth:2,fill:!1}]},h={title:{display:!0,fontSize:18,text:t.charAt(0).toUpperCase()+t.slice(1)+" Spending for "+e},legend:{labels:{boxWidth:0}},scales:{xAxes:[{stacked:!0,ticks:{callback:function(t){return moment(t,"MM").format("MMM")}}}],yAxes:[{stacked:!0,ticks:{beginAtZero:!0,max:d,type:"linear",callback:function(t,e,a){return"$"+t}}}]},tooltips:{enabled:!0,mode:"single",displayColors:!1,backgroundColor:"#FAFFFD",titleFontFamily:"'Lora', serif",titleFontSize:16,titleFontColor:"#252323",titleMarginBottom:8,bodyFontFamily:"'Lora', serif",bodyFontSize:12,bodyFontColor:"#252323",bodySpacing:10,callbacks:{title:function(t){return moment(this._data.labels[t[0].index],"MM").format("MMMM")},label:function(t,e){return"$"+t.yLabel.toFixed(2)}}},hover:{onHover:function(t){c.style.cursor=t[0]?"pointer":"default"}}},p=new Chart(c,{type:"bar",data:y,options:h}),v=[].concat(_toConsumableArray(document.querySelectorAll("button.chartBtn"))),b="bar";if(v){var g=!0,x=!1,C=void 0;try{for(var A,F=v[Symbol.iterator]();!(g=(A=F.next()).done);g=!0){A.value.addEventListener("click",function(t){b=this.value,p.destroy(),"line"===b?p=new Chart(c,{type:"line",data:f,options:h}):"bar"===b&&(p=new Chart(c,{type:"bar",data:y,options:h}))})}}catch(t){x=!0,C=t}finally{try{!g&&F.return&&F.return()}finally{if(x)throw C}}}c.onclick=function(t){var a=p.getElementsAtEvent(t),o=a[0],n=p.data.labels[o._index];p.data.datasets[o._datasetIndex].data[o._index];void 0!==o&&(window.location.href=window.location.href.split("?")[0]+"?month="+n+"&year="+e)}})}function generateRandomColor(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}function monthGraphs(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:moment().startOf("year").format("YYYY");axios.get("/api/category/"+t+"/items?year="+e).then(function(a){var o=a.data,n=(Object.values(o.sumByMonth[e]),document.querySelector(".datepicker .month").textContent),r=document.querySelector(".datepicker .year").textContent,i=o.sumByMonth.budgeted.toFixed(2),l=o.sumByMonth[moment().year(r).format("YYYY")][moment().month(n).format("M")].sum,s=o.sumByMonth[moment().year(r).format("YYYY")][moment().month(n).format("M")].items,d=[];s.map(function(t){d.push(t.amount)});var u=[];s.map(function(t){u.push(t.title)});for(var c=document.getElementById("categoryPieChart"),m=[],y=0;y<u.length;y++){var f=generateRandomColor();m.push(f)}var h=d.reduce(function(t,e){return t+e}),p=i-h;p>0&&(d.push(p),u.push("Remaining in Budget"),m.push("#748386"));var v={labels:u,datasets:[{data:d,borderColor:"#748386",backgroundColor:m,borderWidth:1,fill:!1}]},b={title:{display:!0,padding:20,fontSize:22,text:t.charAt(0).toUpperCase()+t.slice(1)+" Spending for "+n+e},legend:{display:!1,labels:{boxWidth:0}},tooltips:{enabled:!0,mode:"single",displayColors:!1,backgroundColor:"#FAFFFD",titleFontFamily:"'Lora', serif",titleFontSize:16,titleFontColor:"#252323",titleMarginBottom:10,bodyFontFamily:"'Lora', serif",bodyFontSize:12,bodyFontColor:"#252323",bodySpacing:10,callbacks:{title:function(t){return this._data.labels[t[0].index]},label:function(t,e){var a=(Number(e.datasets[t.datasetIndex].data[t.index])/l*100).toFixed(2),o="$"+e.datasets[t.datasetIndex].data[t.index].toFixed(2),n=a+"% of total spending";return new Array(o,n)}}},hover:{onHover:function(t){c.style.cursor=t[0]?"pointer":"default"}}};new Chart(c,{type:"pie",data:v,options:b})})}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function loadAllItems(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:moment().startOf("year").format("YYYY");axios.get("/api/categories/items?year="+t).then(function(e){var a=e.data,o=Object.keys(a.sumByMonth[t]),n=Object.values(a.sumByMonth[t]),r=a.sumByMonth.totalBudget.toFixed(2),i=(Number(r)+.2*Number(r)).toFixed(0),l=document.getElementById("dashboardChart"),s="Total Monthly Budget: $"+r,d=[];n.map(function(t){t<=r?d.push("#17B890"):d.push("#DB504A")});var u={labels:o,datasets:[{label:s,data:n,backgroundColor:d,borderColor:d,borderWidth:1,fill:!1}]},c={labels:o,datasets:[{label:s,data:n,borderColor:"#748386",pointBackgroundColor:d,pointBorderColor:d,borderWidth:2,fill:!1}]},m={responsive:!0,title:{display:!0,fontSize:18,text:"Spending for "+t},legend:{labels:{boxWidth:0}},scales:{xAxes:[{ticks:{callback:function(t){return moment(t,"MM").format("MMM")}}}],yAxes:[{ticks:{beginAtZero:!0,max:i,callback:function(t,e,a){return"$"+t}}}]},tooltips:{enabled:!0,mode:"single",displayColors:!1,backgroundColor:"#FAFFFD",titleFontFamily:"'Lora', serif",titleFontSize:16,titleFontColor:"#252323",titleMarginBottom:8,bodyFontFamily:"'Lora', serif",bodyFontSize:12,bodyFontColor:"#252323",bodySpacing:10,callbacks:{title:function(t){return moment(this._data.labels[t[0].index],"MM").format("MMMM")},label:function(t,e){return"$"+t.yLabel.toFixed(2)}}},hover:{onHover:function(t){l.style.cursor=t[0]?"pointer":"default"}}},y=new Chart(l,{type:"bar",data:u,options:m}),f=[].concat(_toConsumableArray(document.querySelectorAll("button.chartBtn"))),h="bar";if(f){var p=!0,v=!1,b=void 0;try{for(var g,x=f[Symbol.iterator]();!(p=(g=x.next()).done);p=!0){g.value.addEventListener("click",function(t){t.preventDefault(),h=this.value,y.destroy(),y="line"===h?new Chart(l,{type:"line",data:c,options:m}):new Chart(l,{type:"bar",data:u,options:m})})}}catch(t){v=!0,b=t}finally{try{!p&&x.return&&x.return()}finally{if(v)throw b}}}l.onclick=function(e){var a=y.getElementsAtEvent(e),o=a[0],n=y.data.labels[o._index];y.data.datasets[o._datasetIndex].data[o._index];void 0!==o&&(window.location.href=window.location.href.split("?")[0]+"?month="+n+"&year="+t)}})}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}!function(){function t(t,e,a){var o=new RegExp("([?&])"+e+"=.*?(&|$)","i"),n=-1!==t.indexOf("?")?"&":"?";return t.match(o)?t.replace(o,"$1"+e+"="+a+"$2"):t+n+e+"="+a}function e(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}function a(){this.parentElement.classList.add("active-element")}function o(){this.value||this.parentElement.classList.remove("active-element")}var n=document.querySelector("select[name=category-type-filter]");n&&n.addEventListener("change",function(e){var a=this.value;window.location.href=t(window.location.href,"sort",a)});var r=document.querySelector(".mobile-menu-toggle");!function(){r.addEventListener("click",function(t){t.preventDefault(),document.querySelector("body").classList.toggle("menu-open")})}();var i=[].concat(_toConsumableArray(document.querySelectorAll("input:not([type=submit]):not([type=date]), select, textarea")));if(i){var l=!0,s=!1,d=void 0;try{for(var u,c=i[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var m=u.value;!function(t){t.value&&t.classList.add("has-value"),t.addEventListener("change",function(e){t.value?this.classList.add("has-value"):this.classList.remove("has-value")})}(m)}}catch(t){s=!0,d=t}finally{try{!l&&c.return&&c.return()}finally{if(s)throw d}}}var y=[].concat(_toConsumableArray(document.querySelectorAll("input[type=email]"))),f=!0,h=!1,p=void 0;try{for(var v,b=y[Symbol.iterator]();!(f=(v=b.next()).done);f=!0){v.value.addEventListener("keydown",function(t){e(this.value)?this.classList.remove("invalid-input"):this.classList.add("invalid-input")})}}catch(t){h=!0,p=t}finally{try{!f&&b.return&&b.return()}finally{if(h)throw p}}var g=document.querySelector("input[name=password]"),x=document.querySelector("input[name=confirm-password]");g&&x&&x.addEventListener("keyup",function(t){this.value!==g.value?this.classList.add("invalid-input"):(this.classList.remove("invalid-input"),this.classList.add("passwords-match"),g.classList.add("passwords-match"))});var C=document.querySelector(".amount-field input");C&&(C.classList.contains("has-value")&&C.parentElement.classList.add("active-element"),C.addEventListener("focus",a,!0),C.addEventListener("blur",a,!0),C.addEventListener("focusout",o,!0)),function(){var t=[].concat(_toConsumableArray(document.querySelectorAll(".budget-meta")));t&&t.forEach(function(t){var e=t.parentElement.parentElement,a=t.querySelector(".budget-spent");if(a){var o=Number(a.textContent.replace(/[^0-9\.-]+/g,"")),n=Number(t.querySelector(".budget-goal").textContent.replace(/[^0-9\.-]+/g,"")),r=o>n?"overspend":"underspend";a.classList.add(r),e.classList.add(r)}})}();var A=document.querySelectorAll(".flash"),F=!0,M=!1,S=void 0;try{for(var L,k=A[Symbol.iterator]();!(F=(L=k.next()).done);F=!0){var w=L.value;!function(t){var e=1,a=setTimeout(function(){setInterval(function(){e<=.3&&(clearInterval(a),t.style.display="none"),t.style.opacity=e,t.style.filter="alpha(opacity="+100*e+")",e-=.1*e},300)},3e3)}(w)}}catch(t){M=!0,S=t}finally{try{!F&&k.return&&k.return()}finally{if(M)throw S}}}();
//# sourceMappingURL=app.min.js.map
